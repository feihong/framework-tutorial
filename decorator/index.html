

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Decorators &mdash; Secrets of the Framework Creators 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/tutorial.css" type="text/css" />
  

  
    <link rel="top" title="Secrets of the Framework Creators 0.1 documentation" href="../index.html"/>
        <link rel="next" title="Metaclasses" href="../metaclass/index.html"/>
        <link rel="prev" title="Frame Hacks" href="../framehack/index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Secrets of the Framework Creators
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../framehack/index.html">Frame Hacks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Decorators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-decorators">Simple decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorators-that-transform">Decorators that transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorator-methods">Decorator methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorators-that-return-decorators">Decorators that return decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applying-multiple-decorators">Applying multiple decorators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#what-exactly-are-decorators">What Exactly Are Decorators?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-cases">Use Cases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#event-handling">Event Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-metadata-to-a-function">Adding Metadata to a Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transforming-a-function">Transforming a Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#recipes">Recipes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#custom-event-binding">Custom Event Binding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#steps">Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#event-binding-in-tkinter">Event Binding in Tkinter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#decorator-caveats">Decorator Caveats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#can-make-a-mess-of-your-code">Can make a mess of your code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#be-nice-to-the-decorated-function">Be nice to the decorated function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metaclass/index.html">Metaclasses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../magicmethod/index.html">Magic Methods</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Secrets of the Framework Creators</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Decorators</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/decorator/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="decorators">
<h1>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#getting-started" id="id3">Getting Started</a><ul>
<li><a class="reference internal" href="#simple-decorators" id="id4">Simple decorators</a></li>
<li><a class="reference internal" href="#decorators-that-transform" id="id5">Decorators that transform</a></li>
<li><a class="reference internal" href="#decorator-methods" id="id6">Decorator methods</a></li>
<li><a class="reference internal" href="#decorators-that-return-decorators" id="id7">Decorators that return decorators</a></li>
<li><a class="reference internal" href="#applying-multiple-decorators" id="id8">Applying multiple decorators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-exactly-are-decorators" id="id9">What Exactly Are Decorators?</a></li>
<li><a class="reference internal" href="#use-cases" id="id10">Use Cases</a><ul>
<li><a class="reference internal" href="#event-handling" id="id11">Event Handling</a></li>
<li><a class="reference internal" href="#adding-metadata-to-a-function" id="id12">Adding Metadata to a Function</a></li>
<li><a class="reference internal" href="#transforming-a-function" id="id13">Transforming a Function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recipes" id="id14">Recipes</a><ul>
<li><a class="reference internal" href="#custom-event-binding" id="id15">Custom Event Binding</a><ul>
<li><a class="reference internal" href="#prerequisites" id="id16">Prerequisites</a></li>
<li><a class="reference internal" href="#steps" id="id17">Steps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event-binding-in-tkinter" id="id18">Event Binding in Tkinter</a><ul>
<li><a class="reference internal" href="#id1" id="id19">Prerequisites</a></li>
<li><a class="reference internal" href="#id2" id="id20">Steps</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#decorator-caveats" id="id21">Decorator Caveats</a><ul>
<li><a class="reference internal" href="#can-make-a-mess-of-your-code" id="id22">Can make a mess of your code</a></li>
<li><a class="reference internal" href="#be-nice-to-the-decorated-function" id="id23">Be nice to the decorated function</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="getting-started">
<h2><a class="toc-backref" href="#id3">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="simple-decorators">
<h3><a class="toc-backref" href="#id4">Simple decorators</a><a class="headerlink" href="#simple-decorators" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;name:&#39;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">__name__</span>
    <span class="k">print</span> <span class="s">&#39;# arguments:&#39;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">func_code</span><span class="o">.</span><span class="n">co_argcount</span>
    <span class="k">print</span> <span class="s">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">80</span>
    <span class="k">return</span> <span class="n">func</span>

<span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>

<span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">func2</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-python"><div class="highlight"><pre>name: func1
# arguments: 3
--------------------------------------------------------------------------------
name: func2
# arguments: 4
--------------------------------------------------------------------------------
</pre></div>
</div>
<p>This is a simple decorator that accepts no arguments. It is standard practice to have a decorator return a function (though it&#8217;s not required). If you are not planning on transforming a function, then just return the same function that was passed in.</p>
<p>In this particular decorator, all we do is print the name of the target function and the number of arguments it takes. Note that we didn&#8217;t have to invoke either of the functions for that information to be printed.</p>
<p>Keep in mind that the <code class="docutils literal"><span class="pre">&#64;</span></code> syntax is not strictly necessary, it&#8217;s just syntactic sugar. To apply the decorator, you could have written:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">func1</span> <span class="o">=</span> <span class="n">decorator</span><span class="p">(</span><span class="n">func1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="decorators-that-transform">
<h3><a class="toc-backref" href="#id5">Decorators that transform</a><a class="headerlink" href="#decorators-that-transform" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">newfunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">endTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&#39;Took </span><span class="si">%f</span><span class="s"> seconds to run&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">return</span> <span class="n">newfunc</span>

<span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">sum_of_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">))</span>

<span class="k">print</span> <span class="n">sum_of_range</span><span class="p">(</span><span class="mi">345</span><span class="p">,</span> <span class="mi">9999999</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-python"><div class="highlight"><pre>Took 1.172000 seconds to run
16666658313669
</pre></div>
</div>
<p>This decorator replaces a function with a new function that does the the same thing but also prints the duration of execution. Inside the <code class="docutils literal"><span class="pre">decorator</span></code> function we create a new function called <code class="docutils literal"><span class="pre">newfunc</span></code>. Inside <code class="docutils literal"><span class="pre">newfunc</span></code>, <code class="docutils literal"><span class="pre">func</span></code> is invoked with the same arguments that were received by <code class="docutils literal"><span class="pre">newfunc</span></code>.</p>
</div>
<div class="section" id="decorator-methods">
<h3><a class="toc-backref" href="#id6">Decorator methods</a><a class="headerlink" href="#decorator-methods" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Template</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">newfunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">%</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newfunc</span>

<span class="nd">@Template</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> your </span><span class="si">%s</span><span class="s"> are belong to </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="n">quantity</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">group</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">quantity</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">group</span>

<span class="k">print</span> <span class="n">func1</span><span class="p">(</span><span class="s">&#39;All&#39;</span><span class="p">,</span> <span class="s">&#39;base&#39;</span><span class="p">,</span> <span class="s">&#39;us&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can create a callable object that acts as the decorator. This is a common method of creating decorators that accept non-function input.</p>
<p>In this example, the original function only returns a tuple. But after being transformed by the decorator, it now returns a string.</p>
<p>The following is an equivalent way to apply our decorator method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">func1</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> your </span><span class="si">%s</span><span class="s"> are belong to </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)(</span><span class="n">func1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="decorators-that-return-decorators">
<h3><a class="toc-backref" href="#id7">Decorators that return decorators</a><a class="headerlink" href="#decorators-that-return-decorators" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">template</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">decorator2</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">newfunc</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">message</span> <span class="o">%</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newfunc</span>

    <span class="k">return</span> <span class="n">decorator2</span>

<span class="nd">@template</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> your </span><span class="si">%s</span><span class="s"> are belong to </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="n">quantity</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">group</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">quantity</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">group</span>

<span class="k">print</span> <span class="n">func1</span><span class="p">(</span><span class="s">&#39;All&#39;</span><span class="p">,</span> <span class="s">&#39;base&#39;</span><span class="p">,</span> <span class="s">&#39;us&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-python"><div class="highlight"><pre>All your base are belong to us
</pre></div>
</div>
<p>OK, things are getting a little tricky now. This example is equivalent to the last one, except that we are using nested functions and closures to achieve the same affect.</p>
<p>This is the rule: A decorator that does not accept a single function argument must return another decorator. This returned decorator is then applied to the function.</p>
<p>The following is an equivalent way to apply our decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">func1</span> <span class="o">=</span> <span class="n">template</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> your </span><span class="si">%s</span><span class="s"> are belong to </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)(</span><span class="n">func1</span><span class="p">)</span>
</pre></div>
</div>
<p>As a side note, decorators that return decorators almost always use closures.</p>
</div>
<div class="section" id="applying-multiple-decorators">
<h3><a class="toc-backref" href="#id8">Applying multiple decorators</a><a class="headerlink" href="#applying-multiple-decorators" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">decorator1</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Inside decorator1&#39;</span>
    <span class="k">return</span> <span class="n">func</span>

<span class="k">def</span> <span class="nf">decorator2</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Inside decorator2&#39;</span>
    <span class="k">return</span> <span class="n">func</span>

<span class="nd">@decorator1</span>
<span class="nd">@decorator2</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>

<span class="k">print</span> <span class="n">func1</span><span class="p">(</span><span class="s">&#39;All&#39;</span><span class="p">,</span> <span class="s">&#39;base&#39;</span><span class="p">,</span> <span class="s">&#39;us&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Expected output:</p>
<div class="highlight-python"><div class="highlight"><pre>Inside decorator2
Inside decorator1
(&#39;All&#39;, &#39;base&#39;, &#39;us&#39;)
</pre></div>
</div>
<p>Python gives a nice syntax for applying multiple decorators. When we use this syntax, we often say that we are &#8220;stacking decorators&#8221;. Note that the decorators are applied in the opposite order in which they were stacked.</p>
<p>The non-nice way to applying multiple decorators looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">func1</span> <span class="o">=</span> <span class="n">decorator1</span><span class="p">(</span><span class="n">decorator2</span><span class="p">(</span><span class="n">func1</span><span class="p">))</span>
</pre></div>
</div>
<p>Hopefully, this will help you remember why you should return a function inside a decorator &#8211; if you don&#8217;t, then the next decorator in the stack won&#8217;t have a function to apply itself to.</p>
</div>
</div>
<div class="section" id="what-exactly-are-decorators">
<h2><a class="toc-backref" href="#id9">What Exactly Are Decorators?</a><a class="headerlink" href="#what-exactly-are-decorators" title="Permalink to this headline">¶</a></h2>
<p>A decorator is either:</p>
<ul class="simple">
<li>A callable that accepts a function</li>
<li>A callable that accepts some arguments and returns a decorator</li>
</ul>
<p>Any callable can be a decorator. That means functions, methods, and objects that implement the magic method <code class="docutils literal"><span class="pre">__call__</span></code>.</p>
<p>Although decorators have been in Python for a long time, the special decorator syntax using <code class="docutils literal"><span class="pre">&#64;</span></code> was not added to Python until version 2.4. So stay away from earlier versions of Python if you want to make extensive use of decorators.</p>
</div>
<div class="section" id="use-cases">
<h2><a class="toc-backref" href="#id10">Use Cases</a><a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h2>
<div class="section" id="event-handling">
<h3><a class="toc-backref" href="#id11">Event Handling</a><a class="headerlink" href="#event-handling" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pyglet.org/">Pyglet</a> is a multimedia framework that is useful for making games. It gives you an easy way to do event handling through the <code class="docutils literal"><span class="pre">Window.event</span></code> decorator method. Attaching <code class="docutils literal"><span class="pre">Window.event</span></code> to a function causes that function to respond to a particular window event.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pyglet</span> <span class="kn">import</span> <span class="n">window</span>
<span class="kn">from</span> <span class="nn">pyglet.gl</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Window</span><span class="p">()</span>

<span class="nd">@win.event</span>
<span class="k">def</span> <span class="nf">on_key_press</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">modifiers</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">modifiers</span>

<span class="nd">@win.event</span>
<span class="k">def</span> <span class="nf">on_mouse_press</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">modifiers</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">modifiers</span>

<span class="nd">@win.event</span>
<span class="k">def</span> <span class="nf">on_resize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
    <span class="n">glClearColor</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Which event does a function get attached to? The <code class="docutils literal"><span class="pre">Window.event</span></code> decorator decides this by looking at the name of the function (available through the <code class="docutils literal"><span class="pre">__name__</span></code> magic attribute).</p>
<p>Pyglet also lets you bind event callbacks using a more traditional API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Window</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">on_key_press</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">modifiers</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">modifiers</span>
<span class="n">win</span><span class="o">.</span><span class="n">on_key_press</span> <span class="o">=</span> <span class="n">on_key_press</span>

<span class="k">def</span> <span class="nf">on_mouse_press</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">modifiers</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">modifiers</span>
<span class="n">win</span><span class="o">.</span><span class="n">on_mouse_press</span> <span class="o">=</span> <span class="n">on_mouse_press</span>

<span class="k">def</span> <span class="nf">on_resize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
    <span class="n">glClearColor</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">on_resize</span> <span class="o">=</span> <span class="n">on_resize</span>
</pre></div>
</div>
<p>As you can see, this version uses the same number of lines, but is more redundant and not as easy to read.</p>
</div>
<div class="section" id="adding-metadata-to-a-function">
<h3><a class="toc-backref" href="#id12">Adding Metadata to a Function</a><a class="headerlink" href="#adding-metadata-to-a-function" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://turbogears.org">TurboGears</a> is a full stack web framework. In TurboGears, the <code class="docutils literal"><span class="pre">expose</span></code> decorator essentially causes a method to be mapped to a URL. For example, navigating to <code class="docutils literal"><span class="pre">http://localhost/pagelist</span></code> causes the exposed <code class="docutils literal"><span class="pre">pagelist</span></code> method to be invoked.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">turbogears</span> <span class="kn">import</span> <span class="n">controllers</span><span class="p">,</span> <span class="n">expose</span>

<span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">RootController</span><span class="p">):</span>
    <span class="nd">@expose</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pagename</span><span class="o">=</span><span class="s">&quot;FrontPage&quot;</span><span class="p">):</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="o">.</span><span class="n">byPagename</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="s">&#39;Salutations, Friend&#39;</span>
        <span class="k">return</span> <span class="n">content</span>

    <span class="nd">@expose</span>
    <span class="k">def</span> <span class="nf">pagelist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">page</span><span class="o">.</span><span class="n">pagename</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">Page</span><span class="o">.</span><span class="n">select</span><span class="p">()]</span>
        <span class="k">return</span> <span class="s">&#39;&lt;br&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">)</span>
</pre></div>
</div>
<p>Part of how <code class="docutils literal"><span class="pre">expose</span></code> works is to set or modify attributes on the target function. For example, the <code class="docutils literal"><span class="pre">exposed</span></code> attribute is set to <code class="docutils literal"><span class="pre">True</span></code> to let the framework know which methods are to exposed to the Web and which are just &#8220;private&#8221; methods. Also, since multiple <code class="docutils literal"><span class="pre">expose</span></code> decorators might be used on a method, the information for each one is appended to the <code class="docutils literal"><span class="pre">_ruleinfo</span></code> attribute.</p>
</div>
<div class="section" id="transforming-a-function">
<h3><a class="toc-backref" href="#id13">Transforming a Function</a><a class="headerlink" href="#transforming-a-function" title="Permalink to this headline">¶</a></h3>
<p>TurboGears&#8217;s <code class="docutils literal"><span class="pre">expose</span></code> decorator also allows you to attach a template to a method. This alters the behavior of the method. In the following example, the <code class="docutils literal"><span class="pre">index</span></code> method returns a dictionary inside its body. However, the <code class="docutils literal"><span class="pre">expose</span></code> decorator causes it to return a string instead.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">turbogears</span> <span class="kn">import</span> <span class="n">controllers</span><span class="p">,</span> <span class="n">expose</span>

<span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">RootController</span><span class="p">):</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s">&quot;wiki20.templates.page&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pagename</span><span class="o">=</span><span class="s">&quot;FrontPage&quot;</span><span class="p">):</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="o">.</span><span class="n">byPagename</span><span class="p">(</span><span class="n">pagename</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="s">&#39;Salutations, Friend&#39;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">)</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s">&quot;wiki20.templates.pagelist&quot;</span><span class="p">)</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="s">&quot;json&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">pagelist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">page</span><span class="o">.</span><span class="n">pagename</span> <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">Page</span><span class="o">.</span><span class="n">select</span><span class="p">()]</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">pages</span><span class="o">=</span><span class="n">pages</span><span class="p">)</span>
</pre></div>
</div>
<p>Templates in this context are usually HTML pages with &#8220;holes&#8221; in them; the holes are filled by the values in the dictionary returned by the original function. In the context of the <a class="reference external" href="http://en.wikipedia.org/wiki/Model_view_controller">Model-View-Controller</a> pattern, decorators provide the &#8220;glue&#8221; that connects views to controllers.</p>
<p>The <code class="docutils literal"><span class="pre">Root.pagelist</span></code> method shows that you can stack decorators on top of each other. The top invocation, <code class="docutils literal"><span class="pre">&#64;expose(template=&quot;wiki20.templates.pagelist&quot;)</span></code> exposes the method and assigns a template to it. The bottom invocation, <code class="docutils literal"><span class="pre">&#64;expose(&quot;json&quot;)</span></code>, allows the method to render its output in <a class="reference external" href="http://en.wikipedia.org/wiki/Json">JSON</a> format. If you navigate to <code class="docutils literal"><span class="pre">http://localhost/pagelist?tg_format=json</span></code>, you&#8217;ll see JavaScript instead of a web page.</p>
<p>Although a decorator certainly can modify a function, that&#8217;s not what usually happens. Most likely the original function has been substituted for another function (and this substituted function probably makes use of the original function). That&#8217;s why we usually say that a decorator <em>transforms</em> its target function.</p>
<p>Decorators work with both functions and methods.  Just remember that even though we keep talking about functions, we really mean functions <em>and</em> methods.</p>
</div>
</div>
<div class="section" id="recipes">
<h2><a class="toc-backref" href="#id14">Recipes</a><a class="headerlink" href="#recipes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="custom-event-binding">
<h3><a class="toc-backref" href="#id15">Custom Event Binding</a><a class="headerlink" href="#custom-event-binding" title="Permalink to this headline">¶</a></h3>
<p>In this recipe, we explore ways to bind callbacks to an event that we create. Specifically, we create a class <code class="docutils literal"><span class="pre">Downloader</span></code> that has a <code class="docutils literal"><span class="pre">done</span></code> event that gets fired when all downloads have completed. A naive implementation might involve creating a <code class="docutils literal"><span class="pre">done_callback</span></code> attribute, then assigning a function to it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">downloader</span> <span class="o">=</span> <span class="n">Downloader</span><span class="p">(</span><span class="n">url_list</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">ondone</span><span class="p">(</span><span class="n">num_downloaded</span><span class="p">,</span> <span class="n">time_elapsed</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Fetched&quot;</span><span class="p">,</span> <span class="n">num_downloaded</span><span class="p">,</span> <span class="s">&quot;files in&quot;</span><span class="p">,</span> <span class="n">time_elapsed</span><span class="p">,</span> <span class="s">&quot;seconds&quot;</span>

<span class="n">downloader</span><span class="o">.</span><span class="n">done_callback</span> <span class="o">=</span> <span class="n">ondone</span>

<span class="n">downloader</span><span class="o">.</span><span class="n">start_downloads</span><span class="p">()</span>
</pre></div>
</div>
<p>Once we&#8217;re done fully implementing our recipe, we&#8217;ll be able to bind and define our callbacks in a single step. Not only that, we&#8217;ll have the ability to bind multiple callbacks to the <code class="docutils literal"><span class="pre">done</span></code> event:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">downloader</span> <span class="o">=</span> <span class="n">Downloader</span><span class="p">(</span><span class="n">url_list</span><span class="p">)</span>

<span class="nd">@downloader.done</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">time_elapsed</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;Fetched&quot;</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="s">&quot;files in&quot;</span><span class="p">,</span> <span class="n">time_elapsed</span><span class="p">,</span> <span class="s">&quot;seconds&quot;</span>

<span class="nd">@downloader.done</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">time_elapsed</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> downloaded in </span><span class="si">%0.3f</span><span class="s"> minutes&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">time_elapsed</span> <span class="o">/</span> <span class="mf">60.0</span><span class="p">)</span>

<span class="n">downloader</span><span class="o">.</span><span class="n">start_downloads</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="prerequisites">
<h4><a class="toc-backref" href="#id16">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="https://docs.python.org/2/library/threading.html#threading.Thread">threading.Thread</a> class</li>
</ul>
</div>
<div class="section" id="steps">
<h4><a class="toc-backref" href="#id17">Steps</a><a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="downloader/step0.html"><em>Downloader Step 0</em></a></li>
<li><a class="reference internal" href="downloader/step1.html"><em>Downloader Step 1</em></a></li>
<li><a class="reference internal" href="downloader/step2.html"><em>Downloader Step 2</em></a></li>
<li><a class="reference internal" href="downloader/step3.html"><em>Downloader Step 3</em></a></li>
</ul>
</div>
</div>
<div class="section" id="event-binding-in-tkinter">
<h3><a class="toc-backref" href="#id18">Event Binding in Tkinter</a><a class="headerlink" href="#event-binding-in-tkinter" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://docs.python.org/lib/module-Tkinter.html">Tkinter</a> is the default GUI toolkit for Python. It&#8217;s great! Well, it&#8217;s not great, per se, but it ships with Python, so it&#8217;s probably sitting on your system somewhere, ready to be used. So let&#8217;s use it! Here&#8217;s an example of binding a callback function to a button widget:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">Tkinter</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">onclick</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&#39;You clicked on a button&#39;</span>

<span class="n">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">()</span>
<span class="n">frame</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&quot;Event binding with decorators&quot;</span><span class="p">)</span>
<span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">btn1</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;One&quot;</span><span class="p">)</span>
<span class="n">btn1</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">btn2</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;Two&quot;</span><span class="p">)</span>
<span class="n">btn2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">btn1</span><span class="p">[</span><span class="s">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onclick</span>
<span class="n">btn2</span><span class="p">[</span><span class="s">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onclick</span>

<span class="n">frame</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
<p>The resulting GUI program:</p>
<img alt="../_images/tkinter-screenshot.png" src="../_images/tkinter-screenshot.png" />
<p>Tkinter has a pretty simple event binding mechanism for buttons: just assign the <code class="docutils literal"><span class="pre">command</span></code> item to the callback function. However, notice that you have to first define the function, then bind it to the button&#8217;s command event. Why can&#8217;t we define and bind at the same time?</p>
<p>Once you&#8217;ve properly implemented this recipe, you&#8217;ll be able to write the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">btn1</span> <span class="o">=</span> <span class="n">MyButton</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;One&quot;</span><span class="p">)</span>
<span class="n">btn1</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">btn2</span> <span class="o">=</span> <span class="n">MyButton</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;Two&quot;</span><span class="p">)</span>
<span class="n">btn2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="nd">@btn1.command</span>
<span class="nd">@btn2.command</span>
<span class="k">def</span> <span class="nf">onclick</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;You clicked on button &lt;</span><span class="si">%s</span><span class="s">&gt;&#39;</span> <span class="o">%</span> <span class="n">target</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The resulting code is more cohesive than the original.</p>
<p>The first solution to event binding that we describe involves subclassing Tkinter&#8217;s <code class="docutils literal"><span class="pre">Button</span></code> class. However, this isn&#8217;t necessarily a great idea because we probably don&#8217;t want to subclass every single widget in Tkinter. Instead, we can use a decorator function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lb</span> <span class="o">=</span> <span class="n">Listbox</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;lb&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;One&#39;</span><span class="p">,</span> <span class="s">&#39;Two&#39;</span><span class="p">,</span> <span class="s">&#39;Three&#39;</span><span class="p">,</span> <span class="s">&#39;Four&#39;</span><span class="p">]:</span>
    <span class="n">lb</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">END</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="n">lb</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="nd">@bind</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="s">&#39;&lt;&lt;ListboxSelect&gt;&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">onselect</span><span class="p">(</span><span class="n">evt</span><span class="p">):</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">widget</span>
    <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">curselection</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&#39;You selected item </span><span class="si">%d</span><span class="s">: &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting GUI program:</p>
<img alt="../_images/tkinter-screenshot3.png" src="../_images/tkinter-screenshot3.png" />
<p>In the above example, we bind the <code class="docutils literal"><span class="pre">onselect</span></code> function to the <code class="docutils literal"><span class="pre">ListboxSelect</span></code> event on the <code class="docutils literal"><span class="pre">lb</span></code> object.</p>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id19">Prerequisites</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="http://www.shutupandship.com/2012/01/python-closures-explained.html">closures</a></li>
<li>A <a class="reference external" href="http://effbot.org/tkinterbook/tkinter-index.htm">basic familiarity with Tkinter</a></li>
</ul>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id20">Steps</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="tkinter/step0.html"><em>Tkinter Step 0</em></a></li>
<li><a class="reference internal" href="tkinter/step1.html"><em>Tkinter Step 1</em></a></li>
<li><a class="reference internal" href="tkinter/step2.html"><em>Tkinter Step 2</em></a></li>
<li><a class="reference internal" href="tkinter/step3.html"><em>Tkinter Step 3</em></a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="decorator-caveats">
<h2><a class="toc-backref" href="#id21">Decorator Caveats</a><a class="headerlink" href="#decorator-caveats" title="Permalink to this headline">¶</a></h2>
<div class="section" id="can-make-a-mess-of-your-code">
<h3><a class="toc-backref" href="#id22">Can make a mess of your code</a><a class="headerlink" href="#can-make-a-mess-of-your-code" title="Permalink to this headline">¶</a></h3>
<p>Using a lot of decorators can make your code fairly convoluted. Decorators that transform other functions usually need to use nested functions. Too much nesting of functions can really make a mess of your code. If you find yourself writing tons of nested functions, ask yourself if there isn&#8217;t a simpler way to do it. In many cases, metaclasses can be used in place of decorators, since a metaclass is very much like a &#8220;decorator&#8221; that acts on classes. So if you have a set of related functions that all need to be transformed in some way, consider grouping them into methods under a single class and then writing a metaclass.</p>
</div>
<div class="section" id="be-nice-to-the-decorated-function">
<h3><a class="toc-backref" href="#id23">Be nice to the decorated function</a><a class="headerlink" href="#be-nice-to-the-decorated-function" title="Permalink to this headline">¶</a></h3>
<p>If you return a new function in place of an old one, you run the risk of confusing something else in the program that expected attributes from the original function.  For example, if you use a discovery based test runner that looks for methods prefixed with &#8220;test&#8221; then you will need to copy the <code class="docutils literal"><span class="pre">func.__name__</span></code> attribute in your decorated function.  In Python 2.5, the builtin <code class="docutils literal"><span class="pre">&#64;functools.wraps(func)</span></code> is a decorator that returns a function to <em>look</em> like <code class="docutils literal"><span class="pre">func</span></code> and is meant to solve this problem.</p>
<p><a class="reference internal" href="exercises.html"><em>Decorator Exercises</em></a></p>
<p><a class="reference internal" href="../index.html"><em>Go Back</em></a></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../metaclass/index.html" class="btn btn-neutral float-right" title="Metaclasses" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../framehack/index.html" class="btn btn-neutral" title="Frame Hacks" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/tutorial.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>